{"version":3,"file":"index.js","sources":["../src/utils/constants.js","../src/services/contributions.js","../src/utils/index.js","../src/components/GitHubCalendar.js"],"sourcesContent":["// GitHub theme\nexport const DEFAULT_THEME = {\n  background: 'transparent',\n  text: '#000',\n  grade4: '#196127',\n  grade3: '#239a3b',\n  grade2: '#7bc96f',\n  grade1: '#c6e48b',\n  grade0: '#ebedf0',\n};\n\nexport const NAMESPACE = 'react-github-calendar';\n\nexport const LINE_HEIGHT = 1.5;\nexport const MIN_DISTANCE_MONTH_LABELS = 2;\nexport const TITLE_SCALE_FACTOR = 1.25;\n","// Import modules separately to reduce bundle size\nimport addDays from 'date-fns/add_days';\nimport format from 'date-fns/format';\nimport getDay from 'date-fns/get_day';\nimport getMonth from 'date-fns/get_month';\nimport isAfter from 'date-fns/is_after';\nimport isSameYear from 'date-fns/is_same_year';\nimport parse from 'date-fns/parse';\nimport setDay from 'date-fns/set_day';\nimport subYears from 'date-fns/sub_years';\n\nconst API_URL = 'https://github-calendar.now.sh/v1/';\nconst DATE_FORMAT = 'YYYY-MM-DD';\n\nfunction getContributionsForDate(data, date) {\n  return data.contributions.find(contrib => contrib.date === date);\n}\n\nfunction getContributionCountForLastYear(data) {\n  const { contributions } = data;\n  const now = new Date();\n\n  // Start date for accumulating the values\n  const begin = contributions.findIndex(contrib => contrib.date === format(now, DATE_FORMAT));\n\n  // No data for today given\n  if (begin === -1) {\n    return 0;\n  }\n\n  // Check if there is data for the day one year past\n  let end = contributions.findIndex(contrib => {\n    return contrib.date === format(subYears(now, 1), DATE_FORMAT);\n  });\n\n  // Take the oldest contribution otherwise, if not enough data exists\n  if (end === -1) {\n    end = contributions.length - 1;\n  }\n\n  return contributions.slice(begin, end).reduce((acc, contrib) => acc + contrib.count, 0);\n}\n\nfunction getContributionCountForYear(data, year) {\n  const yearEntry = data.years.find(entry => entry.year === String(year));\n\n  return yearEntry ? yearEntry.total : 0;\n}\n\nfunction getBlocksForYear(year, data, fullYear) {\n  const now = new Date();\n  const firstDate = fullYear ? subYears(now, 1) : parse(`${year}-01-01`);\n  const lastDate = fullYear ? now : parse(`${year}-12-31`);\n\n  let weekStart = firstDate;\n\n  // The week starts on Sunday - add days to get to next sunday if neccessary\n  if (getDay(firstDate) !== 0) {\n    weekStart = addDays(firstDate, getDay(firstDate));\n  }\n\n  // Fetch graph data for first row (Sundays)\n  const firstRowDates = [];\n  while (weekStart <= lastDate) {\n    const date = format(weekStart, DATE_FORMAT);\n\n    firstRowDates.push({\n      date,\n      info: getContributionsForDate(data, date),\n    });\n\n    weekStart = setDay(weekStart, 7);\n  }\n\n  // Add the remainig days per week (column for column)\n  return firstRowDates.map(dateObj => {\n    const dates = [];\n    for (let i = 0; i <= 6; i += 1) {\n      const date = format(setDay(dateObj.date, i), DATE_FORMAT);\n\n      if (isAfter(date, lastDate)) {\n        break;\n      }\n\n      dates.push({\n        date,\n        info: getContributionsForDate(data, date),\n      });\n    }\n\n    return dates;\n  });\n}\n\nfunction getMonthLabels(blocks, fullYear) {\n  let previousMonth = 0; // January\n  const { length } = blocks;\n\n  return blocks.slice(0, fullYear ? length - 1 : length).reduce((acc, week, x) => {\n    const date = parse(week[0].date);\n    const month = getMonth(date) + 1;\n    const monthChanged = month !== previousMonth;\n    const firstMonthIsDec = x === 0 && month === 12;\n\n    if (monthChanged && !firstMonthIsDec) {\n      acc.push({\n        x,\n        label: format(date, 'MMM'),\n      });\n      previousMonth = month;\n    }\n\n    return acc;\n  }, []);\n}\n\nfunction getGraphDataForYear(year, data, fullYear) {\n  const blocks = getBlocksForYear(year, data, fullYear);\n  const monthLabels = getMonthLabels(blocks, fullYear);\n  const totalCount = fullYear\n    ? getContributionCountForLastYear(data)\n    : getContributionCountForYear(data, year);\n\n  return {\n    year,\n    blocks,\n    monthLabels,\n    totalCount,\n  };\n}\n\n/**\n * Get the GitHub contributions for a specific user\n * @param options\n * @throws {Error} - Throws an error if the request fails or no data is available\n * @return {Promise<{blocks, monthLabels, totalCount}>} - A promise containing the data\n */\nexport async function getGitHubGraphData(options) {\n  const { years, fullYear, username } = options;\n  const data = await (await fetch(API_URL + username)).json();\n\n  if (!data.years.length) {\n    throw new Error('No data available');\n  }\n\n  return years.map(year => {\n    const isCurrentYear = isSameYear(parse(String(year)), new Date());\n\n    return getGraphDataForYear(year, data, isCurrentYear && fullYear);\n  });\n}\n","import color from 'tinycolor2';\n\nimport { DEFAULT_THEME } from './constants';\n\n/**\n * Create a calendar color theme based on one color\n * @param {string} baseColor - The base color all lighter hues are calculated from\n * @param {string} textColor - Text color\n * @param {string} emptyCellColor\n * @param {string} background - Calendar background color. `transparent` by default\n * @throws {Error} - Throws an error if the color could not be parsed\n * @return {object} - The color theme object\n */\nexport function createCalendarTheme(\n  baseColor,\n  textColor = 'inherit',\n  emptyCellColor = color('white')\n    .darken(8)\n    .toHslString(),\n  background = 'transparent',\n) {\n  const base = color(baseColor);\n\n  if (!base.isValid()) {\n    return DEFAULT_THEME;\n  }\n\n  const text = color(textColor).isValid() ? color(textColor) : DEFAULT_THEME.text;\n\n  return {\n    background,\n    text,\n    grade4: base.setAlpha(0.92).toHslString(),\n    grade3: base.setAlpha(0.76).toHslString(),\n    grade2: base.setAlpha(0.6).toHslString(),\n    grade1: base.setAlpha(0.44).toHslString(),\n    grade0: emptyCellColor,\n  };\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// Import modules separately to reduce bundle size\nimport format from 'date-fns/format';\nimport getYear from 'date-fns/get_year';\n\nimport {\n  DEFAULT_THEME,\n  LINE_HEIGHT,\n  MIN_DISTANCE_MONTH_LABELS,\n  NAMESPACE,\n  TITLE_SCALE_FACTOR,\n} from '../utils/constants';\nimport { getGitHubGraphData } from '../services/contributions';\nimport { createCalendarTheme } from '../utils';\n\nclass GitHubCalendar extends Component {\n  state = {\n    graphs: null,\n    error: null,\n  };\n\n  componentDidMount() {\n    this.fetchData(this.props);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.username !== prevProps.username) {\n      this.setState({\n        graphs: null,\n        error: false,\n      });\n      this.fetchData(this.props);\n    }\n  }\n\n  fetchData({ years, username, fullYear }) {\n    getGitHubGraphData({\n      years,\n      username,\n      fullYear,\n    })\n      .then(graphs => this.setState({ graphs }))\n      .catch(error => this.setState({ error }));\n  }\n\n  getTheme() {\n    const { color, theme } = this.props;\n\n    if (typeof color === 'string') {\n      return createCalendarTheme(color);\n    }\n\n    return theme ? Object.assign({}, DEFAULT_THEME, theme) : DEFAULT_THEME;\n  }\n\n  // Unfortunately there is no support for CSS modules right now...\n  getStyles() {\n    const { fontSize, theme } = this.props;\n\n    return {\n      anchor: {\n        color: 'inherit',\n      },\n      chart: {\n        marginBottom: '1rem',\n      },\n      calendar: {\n        maxWidth: '100%',\n        height: 'auto',\n        marginBottom: '0.25rem',\n        backgroundColor: theme.background,\n        overflow: 'visible',\n      },\n      loading: {\n        fontSize: '90%',\n      },\n      meta: {\n        fontSize,\n      },\n      title: {\n        marginBottom: '0.5rem',\n        paddingBottom: '0.25rem',\n        borderBottom: `2px solid ${this.getTheme().grade0}`,\n        fontSize: `${Math.round(fontSize * TITLE_SCALE_FACTOR)}px`,\n      },\n    };\n  }\n\n  getClassNameFor(object) {\n    return `${NAMESPACE}__${object}`;\n  }\n\n  getDimensions() {\n    const { blockMargin, blockSize, fontSize } = this.props;\n\n    const textHeight = Math.round(fontSize * LINE_HEIGHT);\n\n    // Since weeks start on Sunday, there is a good chance that the graph starts\n    // in the week before January 1st. Therefore, the calendar shows 53 weeks.\n    const width = (52 + 1) * (blockSize + blockMargin) - blockMargin;\n    const height = textHeight + (blockSize + blockMargin) * 7 - blockMargin;\n\n    return { width, height };\n  }\n\n  getTooltipMessage(day) {\n    const { dateFormat } = this.props;\n\n    return `<strong>${day.info.count} contributions</strong> on ${format(day.date, dateFormat)}`;\n  }\n\n  renderTitle() {\n    const { username } = this.props;\n\n    return (\n      <div className={this.getClassNameFor('title')} style={this.getStyles().title}>\n        <a\n          href={`https://github.com/${username}`}\n          title=\"GitHub profile\"\n          style={this.getStyles().anchor}\n        >\n          @{username} on GitHub\n        </a>\n      </div>\n    );\n  }\n\n  renderMonthLabels(monthLabels) {\n    const { blockSize, blockMargin, fontSize } = this.props;\n\n    // Remove the first month label if there's not enough space to the next one\n    // (end of previous month)\n    if (monthLabels[1].x - monthLabels[0].x <= MIN_DISTANCE_MONTH_LABELS) {\n      monthLabels.shift();\n    }\n\n    return monthLabels.map(month => (\n      <text\n        x={(blockSize + blockMargin) * month.x}\n        y={fontSize}\n        key={month.x}\n        style={{\n          fill: this.getTheme().text,\n          fontSize,\n        }}\n      >\n        {month.label}\n      </text>\n    ));\n  }\n\n  renderBlocks(blocks) {\n    const { blockSize, blockMargin, fontSize } = this.props;\n\n    const theme = this.getTheme();\n    const textHeight = Math.round(fontSize * LINE_HEIGHT);\n\n    return blocks\n      .map(week =>\n        week.map((day, y) => (\n          <rect\n            x=\"0\"\n            y={textHeight + (blockSize + blockMargin) * y}\n            width={blockSize}\n            height={blockSize}\n            fill={theme[`grade${day.info ? day.info.intensity : 0}`]}\n            data-tip={day.info && day.info.count ? this.getTooltipMessage(day) : null}\n            key={day.date}\n          />\n        )),\n      )\n      .map((week, x) => (\n        <g key={x} transform={`translate(${(blockSize + blockMargin) * x}, 0)`}>\n          {week}\n        </g>\n      ));\n  }\n\n  renderMeta(year, totalCount) {\n    const { fullYear } = this.props;\n    const isCurrentYear = getYear(new Date()) === year;\n\n    return (\n      <div className={this.getClassNameFor('meta')} style={this.getStyles().meta}>\n        {isCurrentYear && fullYear ? 'Last year' : year}\n        {' – '}\n        {isCurrentYear && !fullYear ? 'So far ' : null}\n        {totalCount} contributions\n      </div>\n    );\n  }\n\n  render() {\n    const { children, style } = this.props;\n    const { error, graphs } = this.state;\n\n    const styles = this.getStyles();\n\n    const { width, height } = this.getDimensions();\n\n    if (error) {\n      return <p>Error :(</p>;\n    }\n\n    if (!graphs) {\n      return (\n        <div className={this.getClassNameFor('loading')} style={this.getStyles().loading}>\n          Loading …\n        </div>\n      );\n    }\n\n    return (\n      <article className={NAMESPACE} style={style}>\n        {this.renderTitle()}\n        {graphs.map((graph, i) => {\n          const { year, blocks, monthLabels, totalCount } = graph;\n\n          return (\n            <div\n              key={year}\n              className={this.getClassNameFor('chart')}\n              style={i < graphs.length - 1 ? styles.chart : null}\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width={width}\n                height={height}\n                viewBox={`0 0 ${width} ${height}`}\n                textRendering=\"optimizeLegibility\"\n                className={this.getClassNameFor('calendar')}\n                style={styles.calendar}\n              >\n                {this.renderMonthLabels(monthLabels)}\n                {this.renderBlocks(blocks)}\n              </svg>\n\n              {this.renderMeta(year, totalCount)}\n              {children}\n            </div>\n          );\n        })}\n      </article>\n    );\n  }\n}\n\nGitHubCalendar.propTypes = {\n  blockSize: PropTypes.number,\n  blockMargin: PropTypes.number,\n  children: PropTypes.node,\n  color: PropTypes.string,\n  dateFormat: PropTypes.string,\n  fontSize: PropTypes.number,\n  fullYear: PropTypes.bool,\n  theme: PropTypes.objectOf(PropTypes.string),\n  username: PropTypes.string.isRequired,\n  years: PropTypes.arrayOf(PropTypes.number),\n};\n\nGitHubCalendar.defaultProps = {\n  blockSize: 12,\n  blockMargin: 2,\n  color: null,\n  dateFormat: 'MMM D, YYYY',\n  fontSize: 14,\n  fullYear: true,\n  theme: DEFAULT_THEME,\n  years: [Number(format(new Date(), 'YYYY'))],\n};\n\nexport default GitHubCalendar;\n"],"names":["DEFAULT_THEME","background","text","grade4","grade3","grade2","grade1","grade0","NAMESPACE","LINE_HEIGHT","MIN_DISTANCE_MONTH_LABELS","TITLE_SCALE_FACTOR","API_URL","DATE_FORMAT","getContributionsForDate","data","date","contributions","find","contrib","getContributionCountForLastYear","now","Date","begin","findIndex","format","end","subYears","length","slice","reduce","acc","count","getContributionCountForYear","year","yearEntry","years","entry","String","total","getBlocksForYear","fullYear","firstDate","parse","lastDate","weekStart","getDay","addDays","firstRowDates","push","info","setDay","map","dateObj","dates","i","isAfter","getMonthLabels","blocks","previousMonth","week","x","month","getMonth","monthChanged","firstMonthIsDec","label","getGraphDataForYear","monthLabels","totalCount","getGitHubGraphData","options","username","fetch","json","Error","isCurrentYear","isSameYear","createCalendarTheme","baseColor","textColor","emptyCellColor","color","darken","toHslString","base","isValid","setAlpha","GitHubCalendar","graphs","error","fetchData","props","prevProps","setState","then","theme","Object","assign","fontSize","anchor","chart","marginBottom","calendar","maxWidth","height","backgroundColor","overflow","loading","meta","title","paddingBottom","borderBottom","getTheme","Math","round","object","blockMargin","blockSize","textHeight","width","day","dateFormat","React","getClassNameFor","getStyles","shift","fill","y","intensity","getTooltipMessage","getYear","children","style","state","styles","getDimensions","renderTitle","graph","renderMonthLabels","renderBlocks","renderMeta","Component","propTypes","PropTypes","number","node","string","bool","objectOf","isRequired","arrayOf","defaultProps","Number"],"mappings":"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"}